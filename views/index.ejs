<%- include("partials/header.ejs") %>
<!-- Navbar with search -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">My Tracker</a>
    <form class="d-flex ms-auto" role="search" method="POST" action="/add">
      <input
        id="searchInput"
        class="form-control me-2"
        type="search"
        name="searchQuery"
        placeholder="Search for Anime, WebSeries, Kdrama..."
        aria-label="Search"
        required
      />
      <select id="typeSelect" class="form-select me-2" name="type">
        <option value="Anime">Anime</option>
        <option value="WebSeries">Web Series</option>
        <option value="Kdrama">K-Drama</option>
      </select>
      <button class="btn btn-success" type="submit">Add</button>
    </form>
    <ul
      class="list-group position-absolute"
      id="suggestions"
      style="
        top: 100%;
        z-index: 1000;
        width: 100%;
        display: none;
        max-height: 300px;
        overflow-y: auto;
      "
    ></ul>
  </div>
</nav>

<!-- Shows grid -->
<div class="container show-grid">
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
    <% if (shows.length === 0) { %>
    <p class="text-center mt-4 fs-5">
      No shows added yet. Add your favorites above!
    </p>
    <% } else { %> <% shows.forEach(show => { %>
    <div class="col">
      <div class="card h-100 shadow-sm">
        <img
          src="<%= show.cover_url %>"
          class="card-img-top"
          alt="<%= show.title %>"
        />
        <div class="card-body">
          <h5 class="card-title"><%= show.title %></h5>
          <p class="card-text mb-1"><strong>Type:</strong> <%= show.type %></p>
          <p class="card-text mb-1">
            <strong>Rating:</strong> <%= show.rating || 'N/A' %>
          </p>
          <p class="card-text">
            <strong>Year:</strong> <%= show.release_year || 'Unknown' %>
          </p>
        </div>
        <div class="card-footer text-center">
          <form action="/delete/<%= show.id %>" method="POST">
            <button class="btn btn-danger btn-sm">Delete</button>
          </form>
        </div>
      </div>
    </div>
    <% }) %> <% } %>
  </div>
</div>

<%- include("partials/footer.ejs") %>
